### 更新日志

2025.08.14

- 适配debian13系统的新特征，确保安装和使用不出现异常设置问题

2025.08.03

- 修复开设的容器设置，设置默认NAT映射时本机IP正常传输
- 修复同一容器配置参数被多次设置后续设置未成功的问题，同时添加延迟设置
- 支持安装的时候指定存储池创建的位置

2025.06.26

- 添加额外的配置，支持docker与inucs进行共存而不会出现网络问题

2025.05.31

- 修复远程仓库验证程序失效导致不可用的问题
- 优化批量开设流程，先尝试使用自修复的镜像，不可用时才考虑使用第三方镜像源

2025.05.18

- 模块化代码，方便后续维护
- 添加CDN随机取值和指数回避重试使用机制，增强可靠性
- 添加宿主机除Ubuntu/Debian系统外其他系统的适配，强制要求重启服务器避免权限未加载
- IPV6网络添加适配firewalld管理，适配多系统的DNS修复和IPV4优先使用
- 修复IPV6网络附加时未使用CDN加速相关依赖下载的问题

2025.03.29

- 修复Hits徽章访问量统计，使用 https://github.com/oneclickvirt/hitscounter

2025.02.23

- 去除对 cip.cc 的依赖

2025.01.30

- 增加无人值守安装的命令，使用```export noninteractive=true```后强制无需重启无需手动输入进行安装。
- 修复在Ubuntu上会自动跳过安装的BUG。
- 更换第三方镜像源，同时设置支持在arm64架构上使用自编译的容器镜像。
- 支持更多系统类型的宿主机进行安装。

2024.06.05

- 更新SSH设置规则，适配Ubuntu24

2024.12.07

- 支持Arch Linux, CentOS（未测试）

2024.05.19

- 放宽IPV6附加的校验规则

2024.05.13

- 较新的Ubuntu/Debian系统可能自带密码禁用验证策略，修复开放密码验证策略

2024.04.14

- 调整批量开设时的端口数量使得端口区间对齐

2024.03.12

- 调整重启网络的代码执行顺序

2024.03.01

- 确保符合 https://github.com/zabbly/incus?tab=readme-ov-file#availability 的要求才使用该源

2024.02.21

- 替换不使用Github的Release的API而使用Raw链接进行自编译的容器列表的检索
- 支持不指定系统版本号的宽泛化自修补系统的检索
- 优化镜像源选择的各个判断

2024.02.12

- 精简一键安装的代码程序

2024.01.20

- 确保存储卷的类型至少支持btrfs或lvm其中之一
- 修复部分宿主机可能不存在unzip命令的问题

2024.01.16

- 增加[自编译](https://github.com/oneclickvirt/incus_images)部分的镜像筛选，加速容器的创建，默认选择顺序：自编译 > 官方 > 清华源
- 解决了部分旧系统在官方系统镜像中不存在的问题，可使用自编译的旧系统镜像
- 更改默认的物理卷类型，以保证容器的硬盘大小得到限制

2024.01.15

- 迁移LXD项目至于incus项目
- 对无zfs的ubuntu系统增加处理
- 宿主机若系统重启，DNS自检测的守护进程增加ufw关闭防火墙的指令，避免重启后防火墙启动导致incus网络冲突

2023.12.21

- 修复部分宿主机本身不存在定时任务机制的问题
- 修复IPV6设置分段设置出现设备已存在的问题

2023.12.21

- 尝试修复网速限制可能部分失效的问题

2023.12.20

- 增加IPV6网络保活的定时任务，避免长期不使用导致V6的ndp广播缓存失效

2023.12.11

- 修复网速限制多线程可能失效的问题，增加max限制

2023.11.28

- 修复宿主机可能绑定多个IPV6地址的情况，可能IPV6地址分别存在两个v6的子网，修正识别为已绑定v6子网的前缀

2023.11.22

- 修复可能检测私网IPV6失灵的情况，完善检测逻辑
- 修复可能宿主机内可能绑定不止一个IPV6地址的情况，只测试地址最长的公网IPV6地址

2023.11.07

- 修复ipv6映射中可能出现的无效安装工具包的问题
- 修复ipv6映射自定义映射方式可能失效的问题
- 默认安装过程中指定lxdbr0的默认DNS配置为8.8.8.8和8.8.4.4，并指定v4和v6默认启用dhcp方式分配IP

2023.11.06

- 增加ssh_bash对PAM的处理，避免某些系统默认启用PAM校验导致SSH登不上的情况
- 增加ipv6处理过程中选择是否使用iptables进行映射，默认不使用iptables方式进行映射而使用新增网络设备的方式进行映射

2023.11.01

- 增加IPV6的地址加白时自动设置开机自删除默认路由的操作，避免宿主机重启后路由又变回来又冲突了

2023.10.28

- 适配非永久隧道情况下的IPV6地址分配
- 适配非fe80地址加白情况下的IPV6地址分配

2023.10.26

- 替换原先使用切分方式获取子网前缀的方式，现自动计算CIDR格式下的子网前缀

2023.10.23

- 替换原先使用 iptables 的方式给容器分配IPV6地址的方法，使用lxc设备直接绑定地址的方法解决分配问题

2023.10.20

- 开设出的容器尝试支持kali，archlinux，rockylinux，oralce，fedora系统

2023.10.19

- 一键脚本支持自定义设置CPU限制数量，增加参数设置
- 尝试支持openwrt系统的SSH自动设置
- 重新划分SSH启用和设置密码的脚本，分为bash版本和sh版本
- 增加清华源备份源，确保当官方网站丢失和失联时使用第三方镜像源下载镜像

2023.10.09

- 一键安装默认启用lxd的lxcfs相关配置，使得容器内查询容器信息变更为容器本身的信息而不是宿主机信息
- 如果使用的是国内宿主机开设容器，现已配置自动替换包管理器源为清华源

2023.09.02

- 增加宿主机的证书设置+vnstat环境安装+lxd环境安装的三合一脚本，配合LXD站点

2023.09.01

- 开设的容器不支持自定义的含小数点的硬盘设置，暂时只支持整数设置硬盘，现已修复

2023.08.29

- 更新zfs的安装源，同官网的说明适配
- 适配新的面板后端，新增部分脚本

2023.08.17

- 修复开设的小鸡alpine系统可能存在的2FA问题
- 修复批量开设不支持自定义是否开启IPV6的问题

2023.08.05

- 修复开设的小鸡alpine系统重启后SSH丢失的问题

2023.07.24

- ubuntu20无法被检索到，上次更新替换了image的查找方式使用json解析，结果判断出问题了，之前没用jq解析json的时候没这个问题的，已修复
- 开设alpine的时候我搬运的我之前写docker虚拟化开设alpine的时候的脚本设置ssh，没想到配置文件不一样，已修复
- 修复了centos系上部分系统ssh开设的问题，对cloudinit文件进行覆盖修改

2023.07.17

- 修复部分镜像检测存在问题，导致无法运行批量开设容器的BUG
- 自定义开设部分增加jq组件检测，如果不存在则自动下载，避免组件缺失

2023.07.09

- 修复未一键安装时导致的缺失文件的问题，所有配置文件移动到/user/local/bin内进行备份，需要使用时再cp加载

2023.07.03

- 调整支持开设的IPV6的子网大小自动适配，而不是写死/64

2023.06.29

- 规整格式，输出全部支持中英双语

2023.06.21

- 修改默认的资源限制放宽了IOPS的限制以加速小鸡的批量生成
- 部分脚本修改网络限制的顺序，在初始化阶段不限制网络以减少小鸡初始化阶段需要的时间
- 修改部分脚本提示

2023.06.20

- 新增支持开设出alpine系统的小鸡
- 修复部分LXD安装的依赖检测问题

2023.06.14

- 修复IPV6地址绑定后如果重启宿主机会导致绑定丢失的问题
- 增加针对IPV6转发的IPV6地址绑定的守护进程，保证重启后IPV6的映射依然存在

2023.06.13 

- LXD的一键安装脚本增加cloud-init文件的识别，~~修改商家的设置，避免DNS重置~~，删除cloud-init组件
- LXD的一键安装脚本增加了进程数限制解除，以使得支持开设100个以上的小鸡
- 使用dos2unix转换ssh.sh文件的格式避免部分模板识别不到文件，依赖自修复增加对zfs编译的修复
- 宿主机增加DNS检测的守护进程，避免LXD在开设服务器的过程中因为继承宿主机DNS配置，导致的DNS重置回商家原始设置的问题
- ssh.sh文件增加对DNS的改写，增加谷歌的DNS配置，这样即便宿主机DNS有问题也保证LXC容器自己的DNS不出问题
- 批量开设的脚本增加对下载带宽和上传带宽的限制
- 开设小鸡时支持自定义小鸡的系统，注意传入参数为系统名字+版本号，如：debian11、ubuntu20，centos7，注意都是小写字母+数字的组合，具体镜像将自动模糊匹配

2023.06.07 将部分组件的安装移动到ssh.sh文件中，且优化依赖安装的部分，支持依赖自修复

2023.05.28 修复部分宿主机原生的DNS和IPV4网络优先级的问题

2023.05.15 增加CDN加速配置文件下载

2023.05.10 增加屏蔽掉可能会导致滥用的组件列表

2023.04.29 修复zfs加载进入内核失败时轮询检测哪个存储类型可用

2023.04.27 修复了老系统一键安装lxd环境时需要lxd.migrate的问题，优化zfs的判别条件

2023.04.26 修复了debian(仅限x86_64架构)的zfs问题，现在一键安装lxd环境的脚本支持debian和ubuntu了
